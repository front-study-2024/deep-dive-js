# 42장 비동기 프로그래밍

## 42.1 동기 처리와 비동기 처리

- 함수를 호출하면 함수 코드가 평가되어 함수 실행 컨텍스트(콜스택)
- 실행 컨텍스트 스택에 실행 컨텍스트가 푸쉬되는 것은 함수 실행의 시작을 의미
- 자바스크립트 엔진은 단 하나의 실행 컨텍스트를 갖는다
- 실행중인 컨텍스트를 제외한 모든 컨텍스트는 실행 대기 중인 태스크들이다.
- 자바스크립트 엔진은 하번에 하나의 태스크만 실행할 수 있는 **싱글 스레드 방식**으로 동작
- 싱글스레드 특성 상 시간이 걸리는 태스크를 실행하면 블로킹이 발생
- 실행 중인 태스크가 종료할 때까지 다음에 실행될 태스크가 대기하는 방식 **동기 처리**
- 실행 중인 태스크가 종료되지 않은 상태라 해도 다음 태스크를 곧바로 실행하는 방식을 **비동기 처리**

## 42.2 이벤트 루프와 태스크 큐

- 브라우저가 여러가지 동작을 할 수 있는것은 **이벤트 루프** 덕분이다.
- 힙은 객체가 저장되는 메모리 공간이다. 콜스택의 요소인 실행 컨텍스트는 힙에 저장된 객체를 참조한다.
- 객체는 원시값과 달리 동적(런타임)으로 할당해야한다. → 힙은 구조화 되어있지 않다.
- 소스 코드의 평가와 실행은 JS엔진(크롬에선 V8)이, 호출 스케줄링을 위한 이벤트 루프와 태스크 큐는 브라우저 환경에 존재한다.
- 프로미스 처리는 **마이크로태스크큐**에서 진행한다.
- 이벤트 루프는 콜스택이 비어있을 경우 태스크 큐에서 콜스택으로 이동
- 자바 스크립트가 싱글스레드 방식이지 브라우저는 싱글 스레드가 아니다.
- 즉, 자바스크립트 엔진은 싱글스레드, 브라우저는 멀티 스레드로 동작한다.
- 예를들면, 타이머의 경우 싱글스레드 방식으로 동작하면 다른 것을 실행할 수 가 없다.
- 브라우저는 렌더링엔진, WEB API를 추가로 제공한다.
